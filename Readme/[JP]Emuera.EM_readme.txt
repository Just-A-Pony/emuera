タイトル：Emuera.EM

バージョン： 1.823
元作者：MinorShift, 妊）|дﾟ)の中の人

改造者：EvilMask
連絡先：evilmask.dev@gmail.com
連絡先：https://twitter.com/devemera

ライセンス：licese.txtを参照してください。

[改造点について]

HTML_PRINTの<space>タグにparamが負数になれます。

プログラム動作中Resourceフォルダーの画像ファイルを常時占用しないようにしました。

CLEARLINEに第二引数追加(整数型，省略可，デフォルトは1)，
第二引数==0時、次のスクリン更新命令(PRINT系など)までに、画面を更新しません。
第二引数!=0時または省略した時、元と同じです。

INPUT, INPUTS, ONEINPUT, ONEINPUTS に第二引数追加(整数型，省略可，デフォルトは0)
TINPUT, TINPUTS, TONEINPUT, TONEINPUTS に第五引数追加(整数型，省略可，デフォルトは0)
追加引数==0時、本家版と同じです。
追加引数!=0時または省略した時、マウスクリックをエンターキーにみなす、左クリニックの時RESULT:1を1、右クリニックの時RESULT:1を2にします。

ONEINPUT, ONEINPUTS, TONEINPUT, TONEINPUTS デフォルト値が1桁/文字以上になれます

$で始まる識別子を文字列とみなす
    例
    LOCALS '= $紅魔館
    と
    LOCALS '= "紅魔館"
    は同じです

式中で使える関数を6つ追加しました。

	int EVAL(str value)

	str EVALS(str value)
	
		文字列を式とみなし、その式の値を返します。

		例：
			#DIMS VAR_A,10
			#DIMS VAR_B
			
			VAR_A:1 = 変数A
			VAR_B = VAR_A

			PRINTSL EVALS(@"%VAR_B%:ABS(-1)")

		結果：
			変数A

	int VAREXIST(str value)
		与えられた文字列と同名な変数が定義されたら変数の性質によって正数を返します。定義されていない場合0を返します。
		変数が整数型の場合、返り値+1
		変数が文字列型の場合、返り値+2
		変数が定数の場合、返り値+4
		変数が2次元配列の場合、返り値+8 
		変数が3次元配列の場合、返り値+16
		例：
			#DEFINE VAR_IS_NUM 1
			#DEFINE VAR_IS_STRING 2
			#DEFINE VAR_IS_CONST 4
			#DEFINE VAR_IS_2DARRAY 8
			#DEFINE VAR_IS_3DARRAY 16
			#DIM FOO,10,10

			...

			IF VAREXIST("FOO")==(VAR_IS_NUM|VAR_IS_2DARRAY)
				PRINTL TRUE
			ELSE
				PRINTL FALSE
			ENDIF
			IF VAREXIST("FOO2")
				PRINTL TRUE
			ELSE
				PRINTL FALSE
			ENDIF
		結果：
			TRUE
			FALSE	
		
	int FUNCEXIST(str value)
		与えられた文字列と同名な関数(式中で使える関数も含め)が定義されたら1を返します(ユーザが定義した関数のみ)。定義されていない場合0を返します。

	int ISDEFINED(str value)
		与えられた文字列と同名なマクロ(#DEFINE XXX)が定義されたら1を返します。定義されていない場合0を返します。
		
	int HTML_STRINGLEN(str value)
		
		与えられた文字列の幅を返します(半角文字数)。複数行の場合、一行目の幅を返します。
		
命令関数を2つ追加しました。

	SETFORM <FORM文字列>,引数1
	例：
		#DIM VAR_A,10
		#DIMS VAR_B = "A"
	とし
		SETFORM VAR_%VAR_B%:1, 1
	は
		VAR_A:1 = 1
	と同じです。

	HTML_SUBSTRING <文字列>,<整数>
	<文字列>を２つ文字列に分けます。一番目の長さは<整数>個半角文字の長さ。結果をRESULTSとRESULTS:1に保存します
	例：
		HTML_SUBSTRING　"AB<b>CD</b>EFG",4
		PRINTSL RESULTS
		PRINTSL RESULTS:1
	結果：
		AB<b>C</b>
		<b>D</b>EFG
	(太字は普通より幅広いからです)
	
	ENUMFUNCBEGINSWITH <文字列>
	ENUMVARBEGINSWITH <文字列>
	ENUMMACROBEGINSWITH <文字列>
	ENUMFUNCENDSWITH <文字列>
	ENUMVARENDSWITH <文字列>
	ENUMMACROENDSWITH <文字列>
	ENUMFUNCWITH <文字列>
	ENUMVARWITH <文字列>
	ENUMMACROWITH <文字列>
	定義されたシンボルを返す，結果をRESULTSに，総数をRESULTに保存します。
	FUNCは関数名，VARは変数名，MACROはマクロ名。
	BEGINSWITHは<文字列>で始まるシンボルです。
	ENDSWITHは<文字列>で終わるシンボルです。
	WITHは<文字列>を含まったシンボルです。
	例:
		#DIM CHAR_NAME
		#DIM CHAR_AGE
		#DIM FLAG_CHAR_ALIVE
		#DIM MAP_TARGET_CHAR

		...

		ENUMVARBEGINSWITH "CHAR"
		; => RESULT = 3
		; => RESULTS = ["CHAR_NAME", "CHAR_AGE", "CHAR_SEX"]
		ENUMVARENDSWITH "CHAR"
		; => RESULT = 1
		; => RESULTS = ["MAP_TARGET_CHAR"]
		ENUMVARWITH "_CHAR_"
		; => RESULT = 1
		; => RESULTS = ["FLAG_CHAR_ALIVE"]
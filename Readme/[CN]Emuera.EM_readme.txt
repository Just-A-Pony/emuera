名称：Emuera.EM

版本： 1.823
原作者：MinorShift, 妊）|дﾟ)の中の人

修改者：EvilMask
联系方式：evilmask.dev@gmail.com

授权许可：请参照licese.txt。

[关于修改版]

现在HTML_PRINT的<space>标签中param参数可以为负数了。

现在程序运行时不会一直占用图片文件了。

CLEARLINE追加第二个参数(整数，可省略，默认为1)，
第二个参数==0时，不会立刻更新屏幕，直到下一次更新屏幕的命令(例如PRINT系指令)
第二个参数!=0时或省略时，效果和原版相同。

追加了6个式中函数。

	int EVAL(str value)

	str EVALS(str value)
	
		将字符串内容视为表达式，返回表达式的值。

		例：
			#DIMS VAR_A,10
			#DIMS VAR_B
			
			VAR_A:1 = 变量A
			VAR_B = VAR_A

			PRINTSL EVALS(@"%VAR_B%:ABS(-1)")

		结果：
			变量A

	int VAREXIST(str value)
	
		若定义了与字符串的值同名的变量则根据变量特性返回正数值。未定义则返回0。
		若变量为整数，返回值+1
		若变量为字符串，返回值+2
		若变量为常数，返回值+4
		若变量为二维数组，返回值+8 
		若变量为三维数组，返回值+16
		例：
			#DEFINE VAR_IS_NUM 1
			#DEFINE VAR_IS_STRING 2
			#DEFINE VAR_IS_CONST 4
			#DEFINE VAR_IS_2DARRAY 8
			#DEFINE VAR_IS_3DARRAT 16
			#DIM FOO,10,10

			...

			IF VAREXIST("FOO")==(VAR_IS_NUM|VAR_IS_2DARRAY)
				PRINTL TRUE
			ELSE
				PRINTL FALSE
			ENDIF
			IF VAREXIST("FOO2")
				PRINTL TRUE
			ELSE
				PRINTL FALSE
			ENDIF
		结果：
			TRUE
			FALSE
		
	int FUNCEXIST(str value)
	
		若定义了与字符串的值同名的函数(包括式中函数)则返回1(仅限用户定义的函数)。未定义则返回0。

	int ISDEFINED(str value)
		若定义了与字符串的值同名的宏(#DEFINE XXX)则返回1。未定义则返回0。	
		
	int HTML_STRINGLEN(str value)
		
		返回字符串显示之后的宽度(半角字符数)，若结果为多行，只返回第一行的宽度
		
		
追加了11个命令函数。

	SETFORM <FORM字符串>,参数1
	例：
	假设已定义
		#DIM VAR_A,10
		#DIMS VAR_B = "A"
	那么
		SETFORM VAR_%VAR_B%:1, 1
	与
		VAR_A:1 = 1
	的效果相同。

	HTML_SUBSTRING <字符串>,<整数>
	将<字符串>拆分为两个字符串，第一个为<整数>个半角字符长度的字符串，结果保存在RESULTS和RESULTS:1中
	例：
		HTML_SUBSTRING　"AB<b>CD</b>EFG",4
		PRINTSL RESULTS
		PRINTSL RESULTS:1
	结果：
		AB<b>C</b>
		<b>D</b>EFG
		(加粗会使字符比普通字符更宽)

	ENUMFUNCBEGINSWITH <字符串>
	ENUMVARBEGINSWITH <字符串>
	ENUMMACROBEGINSWITH <字符串>
	ENUMFUNCENDSWITH <字符串>
	ENUMVARENDSWITH <字符串>
	ENUMMACROENDSWITH <字符串>
	ENUMFUNCWITH <字符串>
	ENUMVARWITH <字符串>
	ENUMMACROWITH <字符串>
	返回用户定义的符号，结果保存在RESULTS中，总数保存在RESULT中
	FUNC代表函数，VAR代表变量，MACRO代表宏
	BEGINSWITH代表检查以<字符串>开头的符号
	ENDSWITH代表检查以<字符串>结尾的符号
	WITH代表检查包含<字符串>的符号
	例:
		#DIM CHAR_NAME
		#DIM CHAR_AGE
		#DIM FLAG_CHAR_ALIVE
		#DIM MAP_TARGET_CHAR

		...

		ENUMVARBEGINSWITH "CHAR"
		; => RESULT = 3
		; => RESULTS = ["CHAR_NAME", "CHAR_AGE", "CHAR_SEX"]
		ENUMVARENDSWITH "CHAR"
		; => RESULT = 1
		; => RESULTS = ["MAP_TARGET_CHAR"]
		ENUMVARWITH "_CHAR_"
		; => RESULT = 1
		; => RESULTS = ["FLAG_CHAR_ALIVE"]

	
	